class App{constructor(e){this.options={navigation:!0,...e},this.tagsCollection=[],document.querySelectorAll(".gallery").forEach(e=>{this.createRowWrapper(e),this.options.lightBox&&this.createLightBox(e,this.options.lightboxId,this.options.navigation),this.listeners(),e.querySelectorAll(".gallery-item").forEach(e=>{this.responsiveImageItem(e),this.moveItemInRowWrapper(e),this.wrapItemInColumn(e,this.options.columns);let t=e.getAttribute("data-gallery-tag");this.options.showTags&&void 0!==t&&-1===this.tagsCollection.indexOf(t)&&this.tagsCollection.push(t)}),this.options.showTags&&this.showItemTags(e,this.options.tagsPosition,this.tagsCollection),e.style.display="block"})}createRowWrapper(e){if(!e.children[0].classList.contains("row")){let t=document.createElement("div");t.classList.add("gallery-items-row","row"),e.appendChild(t)}}wrapItemInColumn(e,t){if(t.constructor===Number){let l=document.createElement("div");l.classList.add("item-column","mb-4",`col-${Math.ceil(12/t)}`),e.parentNode.insertBefore(l,e),l.appendChild(e)}else if(t.constructor===Object){let i=document.createElement("div");i.classList.add("item-column","mb-4"),t.xs&&i.classList.add(`col-${Math.ceil(12/t.xs)}`),t.sm&&i.classList.add(`col-sm-${Math.ceil(12/t.sm)}`),t.md&&i.classList.add(`col-md-${Math.ceil(12/t.md)}`),t.lg&&i.classList.add(`col-lg-${Math.ceil(12/t.lg)}`),t.xl&&i.classList.add(`col-xl-${Math.ceil(12/t.xl)}`),e.parentNode.insertBefore(i,e),i.appendChild(e)}else console.error(`Columns should be defined as numbers or objects. ${typeof t} is not supported.`)}moveItemInRowWrapper(e){e.parentNode.querySelector(".gallery-items-row").appendChild(e)}responsiveImageItem(e){"IMG"===e.tagName&&e.classList.add("img-fluid")}openLightBox(e,t){document.querySelector(`#${t}`).querySelector(".lightboxImage").src=e.src;let l=new bootstrap.Modal(document.querySelector(`#${t}`));l.toggle()}prevImage(e){let t=document.querySelector(`#${e} .lightboxImage`).src,l=Array.from(document.querySelectorAll(".gallery-item img")).find(function(e){return e.src===t}),i=document.querySelector(".tags-bar span.active-tag").getAttribute("data-images-toggle"),s=[],a=(s="all"===i?Array.from(document.querySelectorAll(".gallery-item img")):Array.from(document.querySelectorAll(".gallery-item img")).filter(function(e){return e.parentNode.getAttribute("data-gallery-tag")===i})).indexOf(l);a=(a-1+s.length)%s.length;let o=s[a];document.querySelector(".lightboxImage").src=o.src}nextImage(e){let t=document.querySelector(`#${e} .lightboxImage`).src,l=Array.from(document.querySelectorAll(".gallery-item img")).find(function(e){return e.src===t}),i=document.querySelector(".tags-bar span.active-tag").getAttribute("data-images-toggle"),s=[],a=(s="all"===i?Array.from(document.querySelectorAll(".gallery-item img")):Array.from(document.querySelectorAll(".gallery-item img")).filter(function(e){return e.parentNode.getAttribute("data-gallery-tag")===i})).indexOf(l);a=(a+1)%s.length;let o=s[a];document.querySelector(".lightboxImage").src=o.src}createLightBox(e,t,l){e.insertAdjacentHTML("beforeend",`<div class="modal fade" id="${t||"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">
              <div class="modal-dialog" role="document">
                  <div class="modal-content">
                      <div class="modal-body">
                          ${l?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}
                          <img class="lightboxImage img-fluid" alt="Contenu de l'image affich\xe9e dans la modale au clique"/>
                          ${l?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />'}
                      </div>
                  </div>
              </div>
          </div>`)}showItemTags(e,t,l){let i='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';l.forEach(function(e){i+=`<li class="nav-item active">
              <span class="nav-link"  data-images-toggle="${e}">${e}</span></li>`});let s=`<ul class="my-4 tags-bar nav nav-pills">${i}</ul>`;"bottom"===t?e.insertAdjacentHTML("beforeend",s):"top"===t?e.insertAdjacentHTML("afterbegin",s):console.error(`Unknown tags position: ${t}`)}filterByTag(){if(this.classList.contains("active-tag"))return;document.querySelector(".active-tag").classList.remove("active-tag","active"),this.classList.add("active-tag","active");let e=this.getAttribute("data-images-toggle");document.querySelectorAll(".gallery-item").forEach(t=>{t.closest(".item-column").style.display="none","all"===e?t.closest(".item-column").style.display="block":t.getAttribute("data-gallery-tag")===e&&(t.closest(".item-column").style.display="block")})}listeners(){document.querySelectorAll(".gallery-item").forEach(e=>{e.addEventListener("click",()=>{this.options.lightBox&&("PICTURE"===e.tagName||e.querySelectorAll("img").length>0)&&this.openLightBox(e.querySelector("img"),this.options.lightboxId)})}),document.querySelector(".gallery").addEventListener("click",e=>{e.target.classList.contains("nav-link")&&this.filterByTag.call(e.target),e.target.classList.contains("mg-prev")&&this.prevImage(this.options.lightboxId),e.target.classList.contains("mg-next")&&this.nextImage(this.options.lightboxId)})}}document.addEventListener("DOMContentLoaded",function(){new App({columns:{xs:1,sm:2,md:3,lg:3,xl:3},lightBox:!0,lightboxId:"myAwesomeLightbox",showTags:!0,tagsPosition:"top"})});
